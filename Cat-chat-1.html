<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cat Chat üê±</title>
<style>
body { margin:0; font-family:Arial, sans-serif; background:linear-gradient(120deg,#ff5ca2,#7c4dff); color:white;}
.logo { position:fixed; top:15px; left:15px;}
.logo img { width:120px; border-radius:16px;}
.container { max-width:500px; margin:120px auto; background:rgba(255,255,255,0.15); padding:20px; border-radius:16px;}
input, button { width:100%; padding:10px; margin-top:10px; border:none; border-radius:8px;}
button { background:#ff5ca2; color:white; cursor:pointer;}
#status { margin-top:10px;}
#messages { background:white; color:black; height:300px; overflow-y:auto; padding:10px; border-radius:10px; margin-top:10px;}
.friend { padding:5px; background:rgba(255,255,255,0.2); margin-top:3px; cursor:pointer; border-radius:5px;}
</style>
</head>
<body>

<div class="logo">
  <img src="https://i.ibb.co/9HtYftQh/IMG-5615.png" alt="Cat Chat Logo">
</div>

<div class="container">
<h2>Cat Chat üê±</h2>

<input id="username" placeholder="Kies een naam">
<button id="loginBtn">Login</button>
<p id="status">Niet ingelogd</p>

<div id="chatDiv" style="display:none">
  <p>Ingelogd als: <b id="me"></b></p>
  <button id="logout">Logout</button>

  <h3>Vrienden</h3>
  <input id="friendName" placeholder="Voeg vriend toe">
  <button id="addFriend">Toevoegen</button>
  <div id="friends"></div>

  <h3>Chat met <span id="chatWith">-</span></h3>
  <div id="messages"></div>
  <input id="msg" placeholder="Typ hier...">
  <button id="send">Stuur</button>
</div>

<script>
let me=null, friend=null;
const status = document.getElementById("status");
const chatDiv = document.getElementById("chatDiv");
const meSpan = document.getElementById("me");
const friendsDiv = document.getElementById("friends");
const chatWithSpan = document.getElementById("chatWith");
const messagesDiv = document.getElementById("messages");

let messages = []; // lokaal opslaan (werkt zonder Firebase)

// LOGIN
loginBtn.onclick = ()=>{
  const u = document.getElementById("username").value.trim();
  if(!u) return status.textContent="Vul een naam in!";
  me = u;
  meSpan.textContent = me;
  loginBtn.style.display="none";
  document.getElementById("username").style.display="none";
  chatDiv.style.display="block";
  status.textContent="Ingelogd!";
};

// LOGOUT
logout.onclick = ()=>{
  me=null;
  friend=null;
  chatDiv.style.display="none";
  loginBtn.style.display="block";
  document.getElementById("username").style.display="block";
  messagesDiv.innerHTML="";
  friendsDiv.innerHTML="";
  chatWithSpan.textContent="-";
  status.textContent="Niet ingelogd";
};

// VRIEND TOEVOEGEN
addFriend.onclick = ()=>{
  const f = friendName.value.trim();
  if(!f || f===me) return;
  const div = document.createElement("div");
  div.className="friend";
  div.textContent=f;
  div.onclick=()=>{friend=f; chatWithSpan.textContent=f; loadChat();}
  friendsDiv.appendChild(div);
  friendName.value="";
};

// CHAT
send.onclick = ()=>{
  if(!friend) return;
  messages.push({from:me,to:friend,text:msg.value});
  loadChat();
  msg.value="";
};

function loadChat(){
  messagesDiv.innerHTML="";
  messages.forEach(m=>{
    if((m.from===me && m.to===friend)||(m.to===me && m.from===friend)){
      messagesDiv.innerHTML += `<div><b>${m.from}</b>: ${m.text}</div>`;
    }
  });
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}
</script>
</body>
</html>